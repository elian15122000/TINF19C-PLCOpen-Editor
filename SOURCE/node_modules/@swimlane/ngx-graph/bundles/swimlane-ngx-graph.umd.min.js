!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@swimlane/ngx-charts"),require("d3-selection"),require("d3-shape"),require("d3-ease"),require("d3-transition"),require("rxjs"),require("rxjs/operators"),require("transformation-matrix"),require("dagre"),require("d3-force"),require("webcola"),require("d3-dispatch"),require("d3-timer")):"function"==typeof define&&define.amd?define("@swimlane/ngx-graph",["exports","@angular/core","@swimlane/ngx-charts","d3-selection","d3-shape","d3-ease","d3-transition","rxjs","rxjs/operators","transformation-matrix","dagre","d3-force","webcola","d3-dispatch","d3-timer"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).swimlane=t.swimlane||{},t.swimlane["ngx-graph"]={}),t.ng.core,t.ngxCharts,t.d3Selection,t.shape,t.ease,null,t.rxjs,t.rxjs.operators,t.transformationMatrix,t.dagre,t.d3Force,t.webcola,t.d3Dispatch,t.d3Timer)}(this,(function(t,e,n,i,o,r,a,s,h,d,p,u,g,c,l){"use strict";function m(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var f=m(u),y=m(c),v=m(l),x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function b(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}Object.create;function w(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function O(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function M(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(O(arguments[e]));return t}Object.create;var T,G,L={};function D(){var t=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return L[t="a"+t]?D():(L[t]=!0,t)}(T=t.Orientation||(t.Orientation={})).LEFT_TO_RIGHT="LR",T.RIGHT_TO_LEFT="RL",T.TOP_TO_BOTTOM="TB",T.BOTTOM_TO_TOM="BT",(G=t.Alignment||(t.Alignment={})).CENTER="C",G.UP_LEFT="UL",G.UP_RIGHT="UR",G.DOWN_LEFT="DL",G.DOWN_RIGHT="DR";var k=function(){function e(){this.defaultSettings={orientation:t.Orientation.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}return e.prototype.run=function(t){this.createDagreGraph(t),p.layout(this.dagreGraph),t.edgeLabels=this.dagreGraph._edgeLabels;var e=function(e){var i=n.dagreGraph._nodes[e],o=t.nodes.find((function(t){return t.id===i.id}));o.position={x:i.x,y:i.y},o.dimension={width:i.width,height:i.height}},n=this;for(var i in this.dagreGraph._nodes)e(i);return t},e.prototype.updateEdge=function(t,e){var n=t.nodes.find((function(t){return t.id===e.source})),i=t.nodes.find((function(t){return t.id===e.target})),o=n.position.y<=i.position.y?-1:1,r={x:n.position.x,y:n.position.y-o*(n.dimension.height/2)},a={x:i.position.x,y:i.position.y+o*(i.dimension.height/2)};return e.points=[r,a],t},e.prototype.createDagreGraph=function(t){var e,n,i,o,r=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new p.graphlib.Graph({compound:r.compound,multigraph:r.multigraph}),this.dagreGraph.setGraph({rankdir:r.orientation,marginx:r.marginX,marginy:r.marginY,edgesep:r.edgePadding,ranksep:r.rankPadding,nodesep:r.nodePadding,align:r.align,acyclicer:r.acyclicer,ranker:r.ranker,multigraph:r.multigraph,compound:r.compound}),this.dagreGraph.setDefaultEdgeLabel((function(){return{}})),this.dagreNodes=t.nodes.map((function(t){var e=Object.assign({},t);return e.width=t.dimension.width,e.height=t.dimension.height,e.x=t.position.x,e.y=t.position.y,e})),this.dagreEdges=t.edges.map((function(t){var e=Object.assign({},t);return e.id||(e.id=D()),e}));try{for(var a=w(this.dagreNodes),s=a.next();!s.done;s=a.next()){var h=s.value;h.width||(h.width=20),h.height||(h.height=30),this.dagreGraph.setNode(h.id,h)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}try{for(var d=w(this.dagreEdges),u=d.next();!u.done;u=d.next()){var g=u.value;r.multigraph?this.dagreGraph.setEdge(g.source,g.target,g,g.id):this.dagreGraph.setEdge(g.source,g.target)}}catch(t){i={error:t}}finally{try{u&&!u.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return this.dagreGraph},e}(),E=function(){function e(){this.defaultSettings={orientation:t.Orientation.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}return e.prototype.run=function(t){var e=this;this.createDagreGraph(t),p.layout(this.dagreGraph),t.edgeLabels=this.dagreGraph._edgeLabels;var n=function(t){var n=e.dagreGraph._nodes[t.id];return Object.assign(Object.assign({},t),{position:{x:n.x,y:n.y},dimension:{width:n.width,height:n.height}})};return t.clusters=(t.clusters||[]).map(n),t.nodes=t.nodes.map(n),t},e.prototype.updateEdge=function(t,e){var n=t.nodes.find((function(t){return t.id===e.source})),i=t.nodes.find((function(t){return t.id===e.target})),o=n.position.y<=i.position.y?-1:1,r={x:n.position.x,y:n.position.y-o*(n.dimension.height/2)},a={x:i.position.x,y:i.position.y+o*(i.dimension.height/2)};return e.points=[r,a],t},e.prototype.createDagreGraph=function(t){var e,n,i,o,r,a,s=this,h=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new p.graphlib.Graph({compound:h.compound,multigraph:h.multigraph}),this.dagreGraph.setGraph({rankdir:h.orientation,marginx:h.marginX,marginy:h.marginY,edgesep:h.edgePadding,ranksep:h.rankPadding,nodesep:h.nodePadding,align:h.align,acyclicer:h.acyclicer,ranker:h.ranker,multigraph:h.multigraph,compound:h.compound}),this.dagreGraph.setDefaultEdgeLabel((function(){return{}})),this.dagreNodes=t.nodes.map((function(t){var e=Object.assign({},t);return e.width=t.dimension.width,e.height=t.dimension.height,e.x=t.position.x,e.y=t.position.y,e})),this.dagreClusters=t.clusters||[],this.dagreEdges=t.edges.map((function(t){var e=Object.assign({},t);return e.id||(e.id=D()),e}));try{for(var d=w(this.dagreNodes),u=d.next();!u.done;u=d.next()){var g=u.value;this.dagreGraph.setNode(g.id,g)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}var c=function(t){l.dagreGraph.setNode(t.id,t),t.childNodeIds.forEach((function(e){s.dagreGraph.setParent(e,t.id)}))},l=this;try{for(var m=w(this.dagreClusters),f=m.next();!f.done;f=m.next()){c(f.value)}}catch(t){i={error:t}}finally{try{f&&!f.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}try{for(var y=w(this.dagreEdges),v=y.next();!v.done;v=y.next()){var x=v.value;h.multigraph?this.dagreGraph.setEdge(x.source,x.target,x,x.id):this.dagreGraph.setEdge(x.source,x.target)}}catch(t){r={error:t}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(r)throw r.error}}return this.dagreGraph},e}(),C=function(){function e(){this.defaultSettings={orientation:t.Orientation.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}return e.prototype.run=function(t){var e,n;this.createDagreGraph(t),p.layout(this.dagreGraph),t.edgeLabels=this.dagreGraph._edgeLabels;var i=function(e){var n=o.dagreGraph._nodes[e],i=t.nodes.find((function(t){return t.id===n.id}));i.position={x:n.x,y:n.y},i.dimension={width:n.width,height:n.height}},o=this;for(var r in this.dagreGraph._nodes)i(r);try{for(var a=w(t.edges),s=a.next();!s.done;s=a.next()){var h=s.value;this.updateEdge(t,h)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return t},e.prototype.updateEdge=function(t,e){var n,i,o,r,a=t.nodes.find((function(t){return t.id===e.source})),s=t.nodes.find((function(t){return t.id===e.target})),h="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",d="y"===h?"x":"y",p="y"===h?"height":"width",u=a.position[h]<=s.position[h]?-1:1,g=((n={})[d]=a.position[d],n[h]=a.position[h]-u*(a.dimension[p]/2),n),c=((i={})[d]=s.position[d],i[h]=s.position[h]+u*(s.dimension[p]/2),i),l=this.settings.curveDistance||this.defaultSettings.curveDistance;e.points=[g,(o={},o[d]=g[d],o[h]=g[h]-u*l,o),(r={},r[d]=c[d],r[h]=c[h]+u*l,r),c];var m=e.source+""+e.target+"\0",f=t.edgeLabels[m];return f&&(f.points=e.points),t},e.prototype.createDagreGraph=function(t){var e,n,i,o,r=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new p.graphlib.Graph({compound:r.compound,multigraph:r.multigraph}),this.dagreGraph.setGraph({rankdir:r.orientation,marginx:r.marginX,marginy:r.marginY,edgesep:r.edgePadding,ranksep:r.rankPadding,nodesep:r.nodePadding,align:r.align,acyclicer:r.acyclicer,ranker:r.ranker,multigraph:r.multigraph,compound:r.compound}),this.dagreGraph.setDefaultEdgeLabel((function(){return{}})),this.dagreNodes=t.nodes.map((function(t){var e=Object.assign({},t);return e.width=t.dimension.width,e.height=t.dimension.height,e.x=t.position.x,e.y=t.position.y,e})),this.dagreEdges=t.edges.map((function(t){var e=Object.assign({},t);return e.id||(e.id=D()),e}));try{for(var a=w(this.dagreNodes),s=a.next();!s.done;s=a.next()){var h=s.value;h.width||(h.width=20),h.height||(h.height=30),this.dagreGraph.setNode(h.id,h)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}try{for(var d=w(this.dagreEdges),u=d.next();!u.done;u=d.next()){var g=u.value;r.multigraph?this.dagreGraph.setEdge(g.source,g.target,g,g.id):this.dagreGraph.setEdge(g.source,g.target)}}catch(t){i={error:t}}finally{try{u&&!u.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return this.dagreGraph},e}();function S(t){return"string"==typeof t?{id:t,x:0,y:0}:t}var I=function(){function t(){this.defaultSettings={force:u.forceSimulation().force("charge",u.forceManyBody().strength(-150)).force("collide",u.forceCollide(5)),forceLink:u.forceLink().id((function(t){return t.id})).distance((function(){return 100}))},this.settings={},this.outputGraph$=new s.Subject}return t.prototype.run=function(t){var e=this;return this.inputGraph=t,this.d3Graph={nodes:M(this.inputGraph.nodes.map((function(t){return Object.assign({},t)}))),edges:M(this.inputGraph.edges.map((function(t){return Object.assign({},t)})))},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",(function(){e.outputGraph$.next(e.d3GraphToOutputGraph(e.d3Graph))})),this.outputGraph$.asObservable()},t.prototype.updateEdge=function(t,e){var n=this,i=Object.assign({},this.defaultSettings,this.settings);return i.force&&i.force.nodes(this.d3Graph.nodes).force("link",i.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",(function(){n.outputGraph$.next(n.d3GraphToOutputGraph(n.d3Graph))})),this.outputGraph$.asObservable()},t.prototype.d3GraphToOutputGraph=function(t){return this.outputGraph.nodes=this.d3Graph.nodes.map((function(t){return Object.assign(Object.assign({},t),{id:t.id||D(),position:{x:t.x,y:t.y},dimension:{width:t.dimension&&t.dimension.width||20,height:t.dimension&&t.dimension.height||20},transform:"translate("+(t.x-(t.dimension&&t.dimension.width||20)/2||0)+", "+(t.y-(t.dimension&&t.dimension.height||20)/2||0)+")"})})),this.outputGraph.edges=this.d3Graph.edges.map((function(t){return Object.assign(Object.assign({},t),{source:S(t.source).id,target:S(t.target).id,points:[{x:S(t.source).x,y:S(t.source).y},{x:S(t.target).x,y:S(t.target).y}]})})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph},t.prototype.onDragStart=function(t,e){this.settings.force.alphaTarget(.3).restart();var n=this.d3Graph.nodes.find((function(e){return e.id===t.id}));n&&(this.draggingStart={x:e.x-n.x,y:e.y-n.y},n.fx=e.x-this.draggingStart.x,n.fy=e.y-this.draggingStart.y)},t.prototype.onDrag=function(t,e){if(t){var n=this.d3Graph.nodes.find((function(e){return e.id===t.id}));n&&(n.fx=e.x-this.draggingStart.x,n.fy=e.y-this.draggingStart.y)}},t.prototype.onDragEnd=function(t,e){if(t){var n=this.d3Graph.nodes.find((function(e){return e.id===t.id}));n&&(this.settings.force.alphaTarget(0),n.fx=void 0,n.fy=void 0)}},t}();function P(t,e){return"number"==typeof e?t[e]:e}var N,j,z=function(){function t(){this.defaultSettings={force:g.d3adaptor(Object.assign(Object.assign(Object.assign({},y),f),v)).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600,xOffset:0}},this.settings={},this.outputGraph$=new s.Subject}return t.prototype.run=function(t){var e=this;return this.inputGraph=t,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:M(this.inputGraph.nodes.map((function(t){return Object.assign(Object.assign({},t),{width:t.dimension?t.dimension.width:20,height:t.dimension?t.dimension.height:20})}))),groups:M(this.inputGraph.clusters.map((function(t){return{padding:5,groups:t.childNodeIds.map((function(t){return e.inputGraph.clusters.findIndex((function(e){return e.id===t}))})).filter((function(t){return t>=0})),leaves:t.childNodeIds.map((function(t){return e.inputGraph.nodes.findIndex((function(e){return e.id===t}))})).filter((function(t){return t>=0}))}}))),links:M(this.inputGraph.edges.map((function(t){var n=e.inputGraph.nodes.findIndex((function(e){return t.source===e.id})),i=e.inputGraph.nodes.findIndex((function(e){return t.target===e.id}));if(-1!==n&&-1!==i)return Object.assign(Object.assign({},t),{source:n,target:i})})).filter((function(t){return!!t}))),groupLinks:M(this.inputGraph.edges.map((function(t){var n=e.inputGraph.nodes.findIndex((function(e){return t.source===e.id})),i=e.inputGraph.nodes.findIndex((function(e){return t.target===e.id}));if(!(n>=0&&i>=0))return t})).filter((function(t){return!!t})))},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",(function(){e.settings.onTickListener&&e.settings.onTickListener(e.internalGraph),e.outputGraph$.next(e.internalGraphToOutputGraph(e.internalGraph))})),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()},t.prototype.updateEdge=function(t,e){var n=Object.assign({},this.defaultSettings,this.settings);return n.force&&n.force.start(),this.outputGraph$.asObservable()},t.prototype.internalGraphToOutputGraph=function(t){var e=this;return this.outputGraph.nodes=t.nodes.map((function(t){return Object.assign(Object.assign({},t),{id:t.id||D(),position:{x:t.x,y:t.y},dimension:{width:t.dimension&&t.dimension.width||20,height:t.dimension&&t.dimension.height||20},transform:"translate("+(t.x-(t.dimension&&t.dimension.width||20)/2||0)+", "+(t.y-(t.dimension&&t.dimension.height||20)/2||0)+")"})})),this.outputGraph.edges=t.links.map((function(e){var n=P(t.nodes,e.source),i=P(t.nodes,e.target);return Object.assign(Object.assign({},e),{source:n.id,target:i.id,points:[n.bounds.rayIntersection(i.bounds.cx(),i.bounds.cy()),i.bounds.rayIntersection(n.bounds.cx(),n.bounds.cy())]})})).concat(t.groupLinks.map((function(e){var n=t.nodes.find((function(t){return t.id===e.source})),i=t.nodes.find((function(t){return t.id===e.target})),o=n||t.groups.find((function(t){return t.id===e.source})),r=i||t.groups.find((function(t){return t.id===e.target}));return Object.assign(Object.assign({},e),{source:o.id,target:r.id,points:[o.bounds.rayIntersection(r.bounds.cx(),r.bounds.cy()),r.bounds.rayIntersection(o.bounds.cx(),o.bounds.cy())]})}))),this.outputGraph.clusters=t.groups.map((function(t,n){var i=e.inputGraph.clusters[n];return Object.assign(Object.assign({},i),{dimension:{width:t.bounds?t.bounds.width():20,height:t.bounds?t.bounds.height():20},position:{x:t.bounds?t.bounds.x+t.bounds.width()/2:0,y:t.bounds?t.bounds.y+t.bounds.height()/2:0}})})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph},t.prototype.onDragStart=function(t,e){var n=this.outputGraph.nodes.findIndex((function(e){return e.id===t.id})),i=this.internalGraph.nodes[n];i&&(this.draggingStart={x:i.x-e.x,y:i.y-e.y},i.fixed=1,this.settings.force.start())},t.prototype.onDrag=function(t,e){if(t){var n=this.outputGraph.nodes.findIndex((function(e){return e.id===t.id})),i=this.internalGraph.nodes[n];i&&(i.x=this.draggingStart.x+e.x,i.y=this.draggingStart.y+e.y)}},t.prototype.onDragEnd=function(t,e){if(t){var n=this.outputGraph.nodes.findIndex((function(e){return e.id===t.id})),i=this.internalGraph.nodes[n];i&&(i.fixed=0)}},t}(),_={dagre:k,dagreCluster:E,dagreNodesOnly:C,d3ForceDirected:I,colaForceDirected:z},$=function(){function t(){}return t.prototype.getLayout=function(t){if(_[t])return new _[t];throw new Error("Unknown layout type '"+t+"'")},t}();function W(t,e,n){var i,o,r;n=n||{};var a=null,s=0;function h(){s=!1===n.leading?0:+new Date,a=null,r=t.apply(i,o)}return function(){var d=+new Date;s||!1!==n.leading||(s=d);var p=e-(d-s);return i=this,o=arguments,p<=0?(clearTimeout(a),a=null,s=d,r=t.apply(i,o)):a||!1===n.trailing||(a=setTimeout(h,p)),r}}function B(t,e){return function(n,i,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,i,{configurable:!0,enumerable:o.enumerable,value:W(o.value,t,e)}),this[i]}}}}$.decorators=[{type:e.Injectable}],(N=t.PanningAxis||(t.PanningAxis={})).Both="both",N.Horizontal="horizontal",N.Vertical="vertical",(j=t.MiniMapPosition||(t.MiniMapPosition={})).UpperLeft="UpperLeft",j.UpperRight="UpperRight";var F=function(a){function p(n,i,o,r){var h=a.call(this,n,i,o)||this;return h.el=n,h.zone=i,h.cd=o,h.layoutService=r,h.legend=!1,h.nodes=[],h.clusters=[],h.links=[],h.activeEntries=[],h.draggingEnabled=!0,h.panningEnabled=!0,h.panningAxis=t.PanningAxis.Both,h.enableZoom=!0,h.zoomSpeed=.1,h.minZoomLevel=.1,h.maxZoomLevel=4,h.autoZoom=!1,h.panOnZoom=!0,h.animate=!1,h.autoCenter=!1,h.enableTrackpadSupport=!1,h.showMiniMap=!1,h.miniMapMaxWidth=100,h.miniMapPosition=t.MiniMapPosition.UpperRight,h.activate=new e.EventEmitter,h.deactivate=new e.EventEmitter,h.zoomChange=new e.EventEmitter,h.clickHandler=new e.EventEmitter,h.isMouseMoveCalled=!1,h.graphSubscription=new s.Subscription,h.subscriptions=[],h.margin=[0,0,0,0],h.results=[],h.isPanning=!1,h.isDragging=!1,h.initialized=!1,h.graphDims={width:0,height:0},h._oldLinks=[],h.oldNodes=new Set,h.oldClusters=new Set,h.transformationMatrix=d.identity(),h._touchLastX=null,h._touchLastY=null,h.minimapScaleCoefficient=3,h.minimapOffsetX=0,h.minimapOffsetY=0,h.isMinimapPanning=!1,h.groupResultsBy=function(t){return t.label},h}return function(t,e){function n(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(p,a),Object.defineProperty(p.prototype,"zoomLevel",{get:function(){return this.transformationMatrix.a},set:function(t){this.zoomTo(Number(t))},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"panOffsetX",{get:function(){return this.transformationMatrix.e},set:function(t){this.panTo(Number(t),null)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"panOffsetY",{get:function(){return this.transformationMatrix.f},set:function(t){this.panTo(null,Number(t))},enumerable:!1,configurable:!0}),p.prototype.ngOnInit=function(){var t=this;this.update$&&this.subscriptions.push(this.update$.subscribe((function(){t.update()}))),this.center$&&this.subscriptions.push(this.center$.subscribe((function(){t.center()}))),this.zoomToFit$&&this.subscriptions.push(this.zoomToFit$.subscribe((function(){t.zoomToFit()}))),this.panToNode$&&this.subscriptions.push(this.panToNode$.subscribe((function(e){t.panToNodeId(e)}))),this.minimapClipPathId="minimapClip"+D()},p.prototype.ngOnChanges=function(t){t.layout;var e=t.layoutSettings;t.nodes,t.clusters,t.links;this.setLayout(this.layout),e&&this.setLayoutSettings(this.layoutSettings),this.update()},p.prototype.setLayout=function(t){this.initialized=!1,t||(t="dagre"),"string"==typeof t&&(this.layout=this.layoutService.getLayout(t),this.setLayoutSettings(this.layoutSettings))},p.prototype.setLayoutSettings=function(t){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=t)},p.prototype.ngOnDestroy=function(){var t,e;a.prototype.ngOnDestroy.call(this);try{for(var n=w(this.subscriptions),i=n.next();!i.done;i=n.next()){i.value.unsubscribe()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.subscriptions=null},p.prototype.ngAfterViewInit=function(){var t=this;a.prototype.ngAfterViewInit.call(this),setTimeout((function(){return t.update()}))},p.prototype.update=function(){var t=this;a.prototype.update.call(this),this.curve||(this.curve=o.curveBundle.beta(1)),this.zone.run((function(){t.dims=n.calculateViewDimensions({width:t.width,height:t.height,margins:t.margin,showLegend:t.legend}),t.seriesDomain=t.getSeriesDomain(),t.setColors(),t.legendOptions=t.getLegendOptions(),t.createGraph(),t.updateTransform(),t.initialized=!0}))},p.prototype.createGraph=function(){var t=this;this.graphSubscription.unsubscribe(),this.graphSubscription=new s.Subscription;var e=function(e){return e.meta||(e.meta={}),e.id||(e.id=D()),e.dimension?e.meta.forceDimensions=void 0===e.meta.forceDimensions||e.meta.forceDimensions:(e.dimension={width:t.nodeWidth?t.nodeWidth:30,height:t.nodeHeight?t.nodeHeight:30},e.meta.forceDimensions=!1),e.position={x:0,y:0},e.data=e.data?e.data:{},e};this.graph={nodes:this.nodes.length>0?M(this.nodes).map(e):[],clusters:this.clusters&&this.clusters.length>0?M(this.clusters).map(e):[],edges:this.links.length>0?M(this.links).map((function(t){return t.id||(t.id=D()),t})):[]},requestAnimationFrame((function(){return t.draw()}))},p.prototype.draw=function(){var t=this;if(this.layout&&"string"!=typeof this.layout){this.applyNodeDimensions();var e=this.layout.run(this.graph),n=e instanceof s.Observable?e:s.of(e);this.graphSubscription.add(n.subscribe((function(e){t.graph=e,t.tick()}))),0!==this.graph.nodes.length&&n.pipe(h.first()).subscribe((function(){return t.applyNodeDimensions()}))}},p.prototype.tick=function(){var t=this,e=new Set;this.graph.nodes.map((function(n){n.transform="translate("+(n.position.x-n.dimension.width/2||0)+", "+(n.position.y-n.dimension.height/2||0)+")",n.data||(n.data={}),n.data.color=t.colors.getColor(t.groupResultsBy(n)),e.add(n.id)}));var n=new Set;(this.graph.clusters||[]).map((function(e){e.transform="translate("+(e.position.x-e.dimension.width/2||0)+", "+(e.position.y-e.dimension.height/2||0)+")",e.data||(e.data={}),e.data.color=t.colors.getColor(t.groupResultsBy(e)),n.add(e.id)})),setTimeout((function(){t.oldNodes=e,t.oldClusters=n}),500);var i=[],o=function(t){var e=r.graph.edgeLabels[t],n=t.replace(/[^\w-]*/g,""),o=r.layout&&"string"!=typeof r.layout&&r.layout.settings&&r.layout.settings.multigraph,a=o?r._oldLinks.find((function(t){return""+t.source+t.target+t.id===n})):r._oldLinks.find((function(t){return""+t.source+t.target===n})),s=o?r.graph.edges.find((function(t){return""+t.source+t.target+t.id===n})):r.graph.edges.find((function(t){return""+t.source+t.target===n}));a?a.data&&s&&s.data&&JSON.stringify(a.data)!==JSON.stringify(s.data)&&(a.data=s.data):a=s||e,a.oldLine=a.line;var h=e.points,d=r.generateLine(h),p=Object.assign({},a);p.line=d,p.points=h,r.updateMidpointOnEdge(p,h);var u=h[Math.floor(h.length/2)];u&&(p.textTransform="translate("+(u.x||0)+","+(u.y||0)+")"),p.textAngle=0,p.oldLine||(p.oldLine=p.line),r.calcDominantBaseline(p),i.push(p)},r=this;for(var a in this.graph.edgeLabels)o(a);this.graph.edges=i,this.graph.edges&&(this._oldLinks=this.graph.edges.map((function(t){var e=Object.assign({},t);return e.oldLine=t.line,e}))),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame((function(){return t.redrawLines()})),this.cd.markForCheck()},p.prototype.getMinimapTransform=function(){switch(this.miniMapPosition){case t.MiniMapPosition.UpperLeft:return"";case t.MiniMapPosition.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}},p.prototype.updateGraphDims=function(){for(var t=1/0,e=-1/0,n=1/0,i=-1/0,o=0;o<this.graph.nodes.length;o++){var r=this.graph.nodes[o];t=r.position.x<t?r.position.x:t,n=r.position.y<n?r.position.y:n,e=r.position.x+r.dimension.width>e?r.position.x+r.dimension.width:e,i=r.position.y+r.dimension.height>i?r.position.y+r.dimension.height:i}t-=100,n-=100,e+=100,i+=100,this.graphDims.width=e-t,this.graphDims.height=i-n,this.minimapOffsetX=t,this.minimapOffsetY=n},p.prototype.updateMinimap=function(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())},p.prototype.applyNodeDimensions=function(){var t=this;this.nodeElements&&this.nodeElements.length&&this.nodeElements.map((function(e){var n,i,o=e.nativeElement,r=t.graph.nodes.find((function(t){return t.id===o.id}));if(r){var a;try{if(!(a=o.getBBox()).width||!a.height)return}catch(t){return}if(t.nodeHeight?r.dimension.height=r.dimension.height&&r.meta.forceDimensions?r.dimension.height:t.nodeHeight:r.dimension.height=r.dimension.height&&r.meta.forceDimensions?r.dimension.height:a.height,t.nodeMaxHeight&&(r.dimension.height=Math.max(r.dimension.height,t.nodeMaxHeight)),t.nodeMinHeight&&(r.dimension.height=Math.min(r.dimension.height,t.nodeMinHeight)),t.nodeWidth)r.dimension.width=r.dimension.width&&r.meta.forceDimensions?r.dimension.width:t.nodeWidth;else if(o.getElementsByTagName("text").length){var s=void 0;try{try{for(var h=w(o.getElementsByTagName("text")),d=h.next();!d.done;d=h.next()){var p=d.value.getBBox();s?(p.width>s.width&&(s.width=p.width),p.height>s.height&&(s.height=p.height)):s=p}}catch(t){n={error:t}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}catch(t){return}r.dimension.width=r.dimension.width&&r.meta.forceDimensions?r.dimension.width:s.width+20}else r.dimension.width=r.dimension.width&&r.meta.forceDimensions?r.dimension.width:a.width;t.nodeMaxWidth&&(r.dimension.width=Math.max(r.dimension.width,t.nodeMaxWidth)),t.nodeMinWidth&&(r.dimension.width=Math.min(r.dimension.width,t.nodeMinWidth))}}))},p.prototype.redrawLines=function(t){var e=this;void 0===t&&(t=this.animate),this.linkElements.map((function(n){var o=e.graph.edges.find((function(t){return t.id===n.nativeElement.id}));o&&(i.select(n.nativeElement).select(".line").attr("d",o.oldLine).transition().ease(r.easeSinInOut).duration(t?500:0).attr("d",o.line),i.select(e.chartElement.nativeElement).select("#"+o.id).attr("d",o.oldTextPath).transition().ease(r.easeSinInOut).duration(t?500:0).attr("d",o.textPath),e.updateMidpointOnEdge(o,o.points))}))},p.prototype.calcDominantBaseline=function(t){var e=t.points[0],n=t.points[t.points.length-1];t.oldTextPath=t.textPath,n.x<e.x?(t.dominantBaseline="text-before-edge",t.textPath=this.generateLine(M(t.points).reverse())):(t.dominantBaseline="text-after-edge",t.textPath=t.line)},p.prototype.generateLine=function(t){return o.line().x((function(t){return t.x})).y((function(t){return t.y})).curve(this.curve)(t)},p.prototype.onZoom=function(t,e){if(!this.enableTrackpadSupport||t.ctrlKey){var n=1+("in"===e?this.zoomSpeed:-this.zoomSpeed),i=this.zoomLevel*n;if(!(i<=this.minZoomLevel||i>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&t){var o=t.clientX,r=t.clientY,a=this.chart.nativeElement.querySelector("svg"),s=a.querySelector("g.chart"),h=a.createSVGPoint();h.x=o,h.y=r;var d=h.matrixTransform(s.getScreenCTM().inverse());this.pan(d.x,d.y,!0),this.zoom(n),this.pan(-d.x,-d.y,!0)}else this.zoom(n)}else this.pan(-1*t.deltaX,-1*t.deltaY)},p.prototype.pan=function(t,e,n){void 0===n&&(n=!1);var i=n?1:this.zoomLevel;this.transformationMatrix=d.transform(this.transformationMatrix,d.translate(t/i,e/i)),this.updateTransform()},p.prototype.panTo=function(t,e){if(null!=t&&!isNaN(t)&&null!=e&&!isNaN(e)){var n=-this.panOffsetX-t*this.zoomLevel+this.dims.width/2,i=-this.panOffsetY-e*this.zoomLevel+this.dims.height/2;this.transformationMatrix=d.transform(this.transformationMatrix,d.translate(n/this.zoomLevel,i/this.zoomLevel)),this.updateTransform()}},p.prototype.zoom=function(t){this.transformationMatrix=d.transform(this.transformationMatrix,d.scale(t,t)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()},p.prototype.zoomTo=function(t){this.transformationMatrix.a=isNaN(t)?this.transformationMatrix.a:Number(t),this.transformationMatrix.d=isNaN(t)?this.transformationMatrix.d:Number(t),this.zoomChange.emit(this.zoomLevel),this.updateTransform(),this.update()},p.prototype.onDrag=function(t){var e,n,i=this;if(this.draggingEnabled){var o=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(o,t),o.position.x+=t.movementX/this.zoomLevel,o.position.y+=t.movementY/this.zoomLevel;var r=o.position.x-o.dimension.width/2,a=o.position.y-o.dimension.height/2;o.transform="translate("+r+", "+a+")";var h=function(t){if((t.target===o.id||t.source===o.id||t.target.id===o.id||t.source.id===o.id)&&d.layout&&"string"!=typeof d.layout){var e=d.layout.updateEdge(d.graph,t),n=e instanceof s.Observable?e:s.of(e);d.graphSubscription.add(n.subscribe((function(e){i.graph=e,i.redrawEdge(t)})))}},d=this;try{for(var p=w(this.graph.edges),u=p.next();!u.done;u=p.next()){h(u.value)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}this.redrawLines(!1),this.updateMinimap()}},p.prototype.redrawEdge=function(t){var e=this.generateLine(t.points);this.calcDominantBaseline(t),t.oldLine=t.line,t.line=e},p.prototype.updateTransform=function(){this.transform=d.toSVG(d.smoothMatrix(this.transformationMatrix,100))},p.prototype.onClick=function(t){this.select.emit(t)},p.prototype.onActivate=function(t){this.activeEntries.indexOf(t)>-1||(this.activeEntries=M([t],this.activeEntries),this.activate.emit({value:t,entries:this.activeEntries}))},p.prototype.onDeactivate=function(t){var e=this.activeEntries.indexOf(t);this.activeEntries.splice(e,1),this.activeEntries=M(this.activeEntries),this.deactivate.emit({value:t,entries:this.activeEntries})},p.prototype.getSeriesDomain=function(){var t=this;return this.nodes.map((function(e){return t.groupResultsBy(e)})).reduce((function(t,e){return-1!==t.indexOf(e)?t:t.concat([e])}),[]).sort()},p.prototype.trackLinkBy=function(t,e){return e.id},p.prototype.trackNodeBy=function(t,e){return e.id},p.prototype.setColors=function(){this.colors=new n.ColorHelper(this.scheme,"ordinal",this.seriesDomain,this.customColors)},p.prototype.getLegendOptions=function(){return{scaleType:"ordinal",domain:this.seriesDomain,colors:this.colors}},p.prototype.onMouseMove=function(t){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,t):this.isDragging&&this.draggingEnabled&&this.onDrag(t)},p.prototype.onMouseDown=function(t){this.isMouseMoveCalled=!1},p.prototype.graphClick=function(t){this.isMouseMoveCalled||this.clickHandler.emit(t)},p.prototype.onTouchStart=function(t){this._touchLastX=t.changedTouches[0].clientX,this._touchLastY=t.changedTouches[0].clientY,this.isPanning=!0},p.prototype.onTouchMove=function(t){if(this.isPanning&&this.panningEnabled){var e=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY,i=e-this._touchLastX,o=n-this._touchLastY;this._touchLastX=e,this._touchLastY=n,this.pan(i,o)}},p.prototype.onTouchEnd=function(t){this.isPanning=!1},p.prototype.onMouseUp=function(t){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,t)},p.prototype.onNodeMouseDown=function(t,e){this.draggingEnabled&&(this.isDragging=!0,this.draggingNode=e,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(e,t))},p.prototype.onMinimapDragMouseDown=function(){this.isMinimapPanning=!0},p.prototype.onMinimapPanTo=function(t){var e=t.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient),n=t.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient;this.panTo(e*this.minimapScaleCoefficient,n*this.minimapScaleCoefficient),this.isMinimapPanning=!0},p.prototype.center=function(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)},p.prototype.zoomToFit=function(){var t=this.dims.height/this.graphDims.height,e=this.dims.width/this.graphDims.width,n=Math.min(t,e,1);n<this.minZoomLevel&&(n=this.minZoomLevel),n>this.maxZoomLevel&&(n=this.maxZoomLevel),n!==this.zoomLevel&&(this.zoomLevel=n,this.updateTransform(),this.zoomChange.emit(this.zoomLevel))},p.prototype.panToNodeId=function(t){var e=this.graph.nodes.find((function(e){return e.id===t}));e&&this.panTo(e.position.x,e.position.y)},p.prototype.panWithConstraints=function(e,n){var i=n.movementX,o=n.movementY;switch(this.isMinimapPanning&&(i=-this.minimapScaleCoefficient*i*this.zoomLevel,o=-this.minimapScaleCoefficient*o*this.zoomLevel),e){case t.PanningAxis.Horizontal:this.pan(i,0);break;case t.PanningAxis.Vertical:this.pan(0,o);break;default:this.pan(i,o)}},p.prototype.updateMidpointOnEdge=function(t,e){if(t&&e)if(e.length%2==1)t.midPoint=e[Math.floor(e.length/2)];else{var n=e[e.length/2],i=e[e.length/2-1];t.midPoint={x:(n.x+i.x)/2,y:(n.y+i.y)/2}}},p}(n.BaseChartComponent);F.decorators=[{type:e.Component,args:[{selector:"ngx-graph",template:'<ngx-charts-chart\n  [view]="[width, height]"\n  [showLegend]="legend"\n  [legendOptions]="legendOptions"\n  (legendLabelClick)="onClick($event)"\n  (legendLabelActivate)="onActivate($event)"\n  (legendLabelDeactivate)="onDeactivate($event)"\n  mouseWheel\n  (mouseWheelUp)="onZoom($event, \'in\')"\n  (mouseWheelDown)="onZoom($event, \'out\')"\n>\n  <svg:g\n    *ngIf="initialized && graph"\n    [attr.transform]="transform"\n    (touchstart)="onTouchStart($event)"\n    (touchend)="onTouchEnd($event)"\n    class="graph chart"\n  >\n    <defs>\n      <ng-container *ngIf="defsTemplate" [ngTemplateOutlet]="defsTemplate"></ng-container>\n      <svg:path\n        class="text-path"\n        *ngFor="let link of graph.edges"\n        [attr.d]="link.textPath"\n        [attr.id]="link.id"\n      ></svg:path>\n    </defs>\n\n    <svg:rect\n      class="panning-rect"\n      [attr.width]="dims.width * 100"\n      [attr.height]="dims.height * 100"\n      [attr.transform]="\'translate(\' + (-dims.width || 0) * 50 + \',\' + (-dims.height || 0) * 50 + \')\'"\n      (mousedown)="isPanning = true"\n    />\n\n    <ng-content></ng-content>\n\n    <svg:g class="clusters">\n      <svg:g\n        #clusterElement\n        *ngFor="let node of graph.clusters; trackBy: trackNodeBy"\n        class="node-group"\n        [class.old-node]="animate && oldClusters.has(node.id)"\n        [id]="node.id"\n        [attr.transform]="node.transform"\n        (click)="onClick(node)"\n      >\n        <ng-container\n          *ngIf="clusterTemplate"\n          [ngTemplateOutlet]="clusterTemplate"\n          [ngTemplateOutletContext]="{ $implicit: node }"\n        ></ng-container>\n        <svg:g *ngIf="!clusterTemplate" class="node cluster">\n          <svg:rect\n            [attr.width]="node.dimension.width"\n            [attr.height]="node.dimension.height"\n            [attr.fill]="node.data?.color"\n          />\n          <svg:text alignment-baseline="central" [attr.x]="10" [attr.y]="node.dimension.height / 2">\n            {{ node.label }}\n          </svg:text>\n        </svg:g>\n      </svg:g>\n    </svg:g>\n\n    <svg:g class="links">\n      <svg:g #linkElement *ngFor="let link of graph.edges; trackBy: trackLinkBy" class="link-group" [id]="link.id">\n        <ng-container\n          *ngIf="linkTemplate"\n          [ngTemplateOutlet]="linkTemplate"\n          [ngTemplateOutletContext]="{ $implicit: link }"\n        ></ng-container>\n        <svg:path *ngIf="!linkTemplate" class="edge" [attr.d]="link.line" />\n      </svg:g>\n    </svg:g>\n\n    <svg:g class="nodes">\n      <svg:g\n        #nodeElement\n        *ngFor="let node of graph.nodes; trackBy: trackNodeBy"\n        class="node-group"\n        [class.old-node]="animate && oldNodes.has(node.id)"\n        [id]="node.id"\n        [attr.transform]="node.transform"\n        (click)="onClick(node)"\n        (mousedown)="onNodeMouseDown($event, node)"\n      >\n        <ng-container\n          *ngIf="nodeTemplate"\n          [ngTemplateOutlet]="nodeTemplate"\n          [ngTemplateOutletContext]="{ $implicit: node }"\n        ></ng-container>\n        <svg:circle\n          *ngIf="!nodeTemplate"\n          r="10"\n          [attr.cx]="node.dimension.width / 2"\n          [attr.cy]="node.dimension.height / 2"\n          [attr.fill]="node.data?.color"\n        />\n      </svg:g>\n    </svg:g>\n  </svg:g>\n\n  <svg:clipPath [attr.id]="minimapClipPathId">\n    <svg:rect\n      [attr.width]="graphDims.width / minimapScaleCoefficient"\n      [attr.height]="graphDims.height / minimapScaleCoefficient"\n    ></svg:rect>\n  </svg:clipPath>\n\n  <svg:g\n    class="minimap"\n    *ngIf="showMiniMap"\n    [attr.transform]="minimapTransform"\n    [attr.clip-path]="\'url(#\' + minimapClipPathId + \')\'"\n  >\n    <svg:rect\n      class="minimap-background"\n      [attr.width]="graphDims.width / minimapScaleCoefficient"\n      [attr.height]="graphDims.height / minimapScaleCoefficient"\n      (mousedown)="onMinimapPanTo($event)"\n    ></svg:rect>\n\n    <svg:g\n      [style.transform]="\n        \'translate(\' +\n        -minimapOffsetX / minimapScaleCoefficient +\n        \'px,\' +\n        -minimapOffsetY / minimapScaleCoefficient +\n        \'px)\'\n      "\n    >\n      <svg:g class="minimap-nodes" [style.transform]="\'scale(\' + 1 / minimapScaleCoefficient + \')\'">\n        <svg:g\n          #nodeElement\n          *ngFor="let node of graph.nodes; trackBy: trackNodeBy"\n          class="node-group"\n          [class.old-node]="animate && oldNodes.has(node.id)"\n          [id]="node.id"\n          [attr.transform]="node.transform"\n        >\n          <ng-container\n            *ngIf="miniMapNodeTemplate"\n            [ngTemplateOutlet]="miniMapNodeTemplate"\n            [ngTemplateOutletContext]="{ $implicit: node }"\n          ></ng-container>\n          <ng-container\n            *ngIf="!miniMapNodeTemplate && nodeTemplate"\n            [ngTemplateOutlet]="nodeTemplate"\n            [ngTemplateOutletContext]="{ $implicit: node }"\n          ></ng-container>\n          <svg:circle\n            *ngIf="!nodeTemplate && !miniMapNodeTemplate"\n            r="10"\n            [attr.cx]="node.dimension.width / 2 / minimapScaleCoefficient"\n            [attr.cy]="node.dimension.height / 2 / minimapScaleCoefficient"\n            [attr.fill]="node.data?.color"\n          />\n        </svg:g>\n      </svg:g>\n\n      <svg:rect\n        [attr.transform]="\n          \'translate(\' +\n          panOffsetX / zoomLevel / -minimapScaleCoefficient +\n          \',\' +\n          panOffsetY / zoomLevel / -minimapScaleCoefficient +\n          \')\'\n        "\n        class="minimap-drag"\n        [class.panning]="isMinimapPanning"\n        [attr.width]="width / minimapScaleCoefficient / zoomLevel"\n        [attr.height]="height / minimapScaleCoefficient / zoomLevel"\n        (mousedown)="onMinimapDragMouseDown()"\n      ></svg:rect>\n    </svg:g>\n  </svg:g>\n</ngx-charts-chart>\n',encapsulation:e.ViewEncapsulation.None,changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[".minimap .minimap-background{fill:rgba(0,0,0,.1)}.minimap .minimap-drag{cursor:pointer;fill:rgba(0,0,0,.2);stroke:#fff;stroke-dasharray:2px;stroke-dashoffset:2px;stroke-width:1px}.minimap .minimap-drag.panning{fill:rgba(0,0,0,.3)}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none}.graph .edge{fill:none;stroke:#666}.graph .edge .edge-label{fill:#251e1e;font-size:12px;stroke:none}.graph .panning-rect{cursor:move;fill:transparent}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .cluster rect{opacity:.2}"]}]}],F.ctorParameters=function(){return[{type:e.ElementRef},{type:e.NgZone},{type:e.ChangeDetectorRef},{type:$}]},F.propDecorators={legend:[{type:e.Input}],nodes:[{type:e.Input}],clusters:[{type:e.Input}],links:[{type:e.Input}],activeEntries:[{type:e.Input}],curve:[{type:e.Input}],draggingEnabled:[{type:e.Input}],nodeHeight:[{type:e.Input}],nodeMaxHeight:[{type:e.Input}],nodeMinHeight:[{type:e.Input}],nodeWidth:[{type:e.Input}],nodeMinWidth:[{type:e.Input}],nodeMaxWidth:[{type:e.Input}],panningEnabled:[{type:e.Input}],panningAxis:[{type:e.Input}],enableZoom:[{type:e.Input}],zoomSpeed:[{type:e.Input}],minZoomLevel:[{type:e.Input}],maxZoomLevel:[{type:e.Input}],autoZoom:[{type:e.Input}],panOnZoom:[{type:e.Input}],animate:[{type:e.Input}],autoCenter:[{type:e.Input}],update$:[{type:e.Input}],center$:[{type:e.Input}],zoomToFit$:[{type:e.Input}],panToNode$:[{type:e.Input}],layout:[{type:e.Input}],layoutSettings:[{type:e.Input}],enableTrackpadSupport:[{type:e.Input}],showMiniMap:[{type:e.Input}],miniMapMaxWidth:[{type:e.Input}],miniMapMaxHeight:[{type:e.Input}],miniMapPosition:[{type:e.Input}],activate:[{type:e.Output}],deactivate:[{type:e.Output}],zoomChange:[{type:e.Output}],clickHandler:[{type:e.Output}],linkTemplate:[{type:e.ContentChild,args:["linkTemplate"]}],nodeTemplate:[{type:e.ContentChild,args:["nodeTemplate"]}],clusterTemplate:[{type:e.ContentChild,args:["clusterTemplate"]}],defsTemplate:[{type:e.ContentChild,args:["defsTemplate"]}],miniMapNodeTemplate:[{type:e.ContentChild,args:["miniMapNodeTemplate"]}],chart:[{type:e.ViewChild,args:[n.ChartComponent,{read:e.ElementRef,static:!0}]}],nodeElements:[{type:e.ViewChildren,args:["nodeElement"]}],linkElements:[{type:e.ViewChildren,args:["linkElement"]}],groupResultsBy:[{type:e.Input}],zoomLevel:[{type:e.Input,args:["zoomLevel"]}],panOffsetX:[{type:e.Input,args:["panOffsetX"]}],panOffsetY:[{type:e.Input,args:["panOffsetY"]}],onMouseMove:[{type:e.HostListener,args:["document:mousemove",["$event"]]}],onMouseDown:[{type:e.HostListener,args:["document:mousedown",["$event"]]}],graphClick:[{type:e.HostListener,args:["document:click",["$event"]]}],onTouchMove:[{type:e.HostListener,args:["document:touchmove",["$event"]]}],onMouseUp:[{type:e.HostListener,args:["document:mouseup",["$event"]]}]},function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);r>3&&a&&Object.defineProperty(e,n,a)}([B(500),b("design:type",Function),b("design:paramtypes",[]),b("design:returntype",void 0)],F.prototype,"updateMinimap",null);var H=function(){function t(){this.mouseWheelUp=new e.EventEmitter,this.mouseWheelDown=new e.EventEmitter}return t.prototype.onMouseWheelChrome=function(t){this.mouseWheelFunc(t)},t.prototype.onMouseWheelFirefox=function(t){this.mouseWheelFunc(t)},t.prototype.onWheel=function(t){this.mouseWheelFunc(t)},t.prototype.onMouseWheelIE=function(t){this.mouseWheelFunc(t)},t.prototype.mouseWheelFunc=function(t){window.event&&(t=window.event);var e=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail||t.deltaY||t.deltaX)),n=t.wheelDelta?e>0:e<0,i=t.wheelDelta?e<0:e>0;n?this.mouseWheelUp.emit(t):i&&this.mouseWheelDown.emit(t),t.returnValue=!1,t.preventDefault&&t.preventDefault()},t}();H.decorators=[{type:e.Directive,args:[{selector:"[mouseWheel]"}]}],H.propDecorators={mouseWheelUp:[{type:e.Output}],mouseWheelDown:[{type:e.Output}],onMouseWheelChrome:[{type:e.HostListener,args:["mousewheel",["$event"]]}],onMouseWheelFirefox:[{type:e.HostListener,args:["DOMMouseScroll",["$event"]]}],onWheel:[{type:e.HostListener,args:["wheel",["$event"]]}],onMouseWheelIE:[{type:e.HostListener,args:["onmousewheel",["$event"]]}]};var R=function(){};R.decorators=[{type:e.NgModule,args:[{imports:[n.ChartCommonModule],declarations:[F,H],exports:[F,H],providers:[$]}]}];var X=function(){};X.decorators=[{type:e.NgModule,args:[{imports:[n.NgxChartsModule],exports:[R]}]}],t.ColaForceDirectedLayout=z,t.D3ForceDirectedLayout=I,t.DagreClusterLayout=E,t.DagreLayout=k,t.DagreNodesOnlyLayout=C,t.GraphComponent=F,t.GraphModule=R,t.MouseWheelDirective=H,t.NgxGraphModule=X,t.toD3Node=S,t.toNode=P,t.ɵa=$,t.ɵb=B,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=swimlane-ngx-graph.umd.min.js.map